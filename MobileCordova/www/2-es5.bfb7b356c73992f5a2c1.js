!function(){function e(t,n,i){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(t,n,i||t)}function t(e,n){return(t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,n)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var a=o(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return i(this,n)}}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"H+bZ":function(i,a,s){"use strict";s.d(a,"a",(function(){return m}));var u=s("HDdC"),l=s("7o/Q");function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(t){return t.lift(new b(e,t))}}var h,b=function(){function e(t,n){r(this,e),this.count=t,this.source=n}return c(e,[{key:"call",value:function(e,t){return t.subscribe(new d(e,this.count,this.source))}}]),e}(),d=function(i){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(s,i);var a=n(s);function s(e,t,n){var i;return r(this,s),(i=a.call(this,e)).count=t,i.source=n,i}return c(s,[{key:"error",value:function(t){if(!this.isStopped){var n=this.source,i=this.count;if(0===i)return e(o(s.prototype),"error",this).call(this,t);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}}}]),s}(l.a),p=s("JIr8"),g=s("fXoL"),v=s("tk/3"),m=((h=function(){function e(t){r(this,e),this.http=t,this.endpoint="http://2.238.108.96:3000",this.clientEndpoint="http://ammireto.cloud"}return c(e,[{key:"handleError",value:function(e){return e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error("Backend returned code ".concat(e.status,", body was: ")+e.error),new u.a((function(e){return e.error("Something bad happened; please try again later.")}))}},{key:"getCardSets",value:function(){return this.http.get(this.endpoint+"/getCardSets").pipe(f(2),Object(p.a)(this.handleError))}},{key:"getGames",value:function(){return this.http.get(this.endpoint+"/getGames").pipe(f(2),Object(p.a)(this.handleError))}},{key:"createGroup",value:function(e,t,n,i){return this.http.post(this.endpoint+"/createGroup",{nickname:e,cardSet:t,game:n,money:i}).pipe(f(2),Object(p.a)(this.handleError))}},{key:"joinGroup",value:function(e,t){return this.http.get(this.endpoint+"/joinGroup/"+e+"/"+t).pipe(f(2),Object(p.a)(this.handleError))}},{key:"exitGroup",value:function(e,t){return this.http.get(this.endpoint+"/exitGroup/"+e+"/"+t).pipe(f(2),Object(p.a)(this.handleError))}},{key:"updatePlayers",value:function(e,t){return this.http.post(this.endpoint+"/updatePlayers",{players:e,code:t}).pipe(f(2),Object(p.a)(this.handleError))}},{key:"updateBalance",value:function(e,t,n){return this.http.get(this.endpoint+"/updateBalance/"+e+"/"+t+"/"+n).pipe(f(2),Object(p.a)(this.handleError))}},{key:"setGhost",value:function(e,t,n){return this.http.get(this.endpoint+"/setGhost/"+e+"/"+t+"/"+n).pipe(f(2),Object(p.a)(this.handleError))}}]),e}()).\u0275fac=function(e){return new(e||h)(g.Qb(v.a))},h.\u0275prov=g.Db({token:h,factory:h.\u0275fac,providedIn:"root"}),h)},HM5V:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var i=function(e){return e.Close="close-outline",e.Login="log-in-outline",e.Logout="log-out-outline",e.Info="alert-circle-outline",e}({}),o=function e(){r(this,e),this.disableButton=!1,this.time=2e3}},OC8m:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("mrSG"),o=n("2Vo4"),a=n("HM5V"),s=n("fXoL"),u=n("TEn/"),l=function(){var e=function(){function e(t){r(this,e),this.toastController=t,this.notifications=[],this.notificationListener=new o.a(this.notifications),this.queue=-1,this.initialized=!1}return c(e,[{key:"ionViewDidLeave",value:function(){this.disableNotifications()}},{key:"addNotification",value:function(e,t,n,i){var o=new a.b;o.message=e,o.icon=null!=t?t:o.icon,o.time=null!=n?n:o.time,o.disableButton=null!=i?i:o.disableButton,this.notifications.push(o),this.notificationListener.next(this.notifications)}},{key:"enableNotifications",value:function(){var e=this;this.initialized||(this.initialized=!0,this.notificationListener.subscribe((function(t){return Object(i.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0==t.length){e.next=5;break}return n=this.notifications.pop(),this.notificationListener.next(this.notifications),e.next=5,this.showNotification(n);case 5:case"end":return e.stop()}}),e,this)})))})))}},{key:"disableNotifications",value:function(){this.notificationListener.unsubscribe(),this.initialized=!1}},{key:"showNotification",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.queue++,setTimeout((function(){return Object(i.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],e.icon&&n.push({side:"start",icon:e.icon,handler:function(){}}),e.disableButton||n.push({side:"end",icon:a.a.Close,handler:function(){}}),t.next=4,this.toastController.create({message:e.message,duration:e.time,buttons:n});case 4:(i=t.sent).onDidDismiss().then((function(e){o.queue--})),i.present();case 6:case"end":return t.stop()}}),t,this)})))}),e.time*this.queue);case 1:case"end":return t.stop()}}),t,this)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Qb(u.L))},e.\u0275prov=s.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"ct+p":function(e,t,n){"use strict";n.r(t),n.d(t,"HomePageModule",(function(){return C}));var i,o=n("ofXK"),a=n("TEn/"),s=n("3Pt+"),u=n("tyNb"),l=n("mrSG"),f=n("HM5V"),h=n("fXoL"),b=n("H+bZ"),d=n("e8h1"),p=((i=function(){function e(t){r(this,e),this.storage=t}return c(e,[{key:"setStorage",value:function(e,t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.storage.set(e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"getStorage",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.storage.get(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||i)(h.Qb(d.b))},i.\u0275prov=h.Db({token:i,factory:i.\u0275fac,providedIn:"root"}),i),g=n("OC8m");function v(e,t){if(1&e&&(h.Mb(0,"ion-select-option",17),h.ic(1),h.Lb()),2&e){var n=t.$implicit;h.Zb("value",n.id),h.xb(1),h.jc(n.name)}}function m(e,t){if(1&e&&(h.Mb(0,"ion-select-option",17),h.ic(1),h.Lb()),2&e){var n=t.$implicit;h.Zb("value",n.id),h.xb(1),h.jc(n.name)}}var y=function(){return{standalone:!0}};function k(e,t){if(1&e){var n=h.Nb();h.Mb(0,"div",7),h.Mb(1,"ion-item"),h.Mb(2,"ion-label",8),h.ic(3,"Nickname"),h.Lb(),h.Mb(4,"ion-input",9),h.Ub("ngModelChange",(function(e){return h.ec(n),h.Wb().nickname=e})),h.Lb(),h.Lb(),h.Mb(5,"ion-list-header",10),h.Mb(6,"ion-label"),h.ic(7," Gruppo Esistente "),h.Lb(),h.Lb(),h.Mb(8,"ion-item"),h.Mb(9,"ion-label"),h.ic(10,"Codice"),h.Lb(),h.Mb(11,"ion-input",11),h.Ub("ngModelChange",(function(e){return h.ec(n),h.Wb().code=e})),h.Lb(),h.Lb(),h.Mb(12,"ion-button",12),h.Ub("click",(function(){return h.ec(n),h.Wb().join()})),h.ic(13,"Partecipa"),h.Lb(),h.Mb(14,"ion-list-header",10),h.Mb(15,"ion-label"),h.ic(16," Nuovo gruppo "),h.Lb(),h.Lb(),h.Mb(17,"ion-item"),h.Mb(18,"ion-label"),h.ic(19,"Set di carte"),h.Lb(),h.Mb(20,"ion-select",13),h.Ub("ngModelChange",(function(e){return h.ec(n),h.Wb().selectedSet=e})),h.hc(21,v,2,2,"ion-select-option",14),h.Lb(),h.Lb(),h.Mb(22,"ion-item"),h.Mb(23,"ion-label"),h.ic(24,"Gioco"),h.Lb(),h.Mb(25,"ion-select",13),h.Ub("ngModelChange",(function(e){return h.ec(n),h.Wb().selectedGame=e})),h.hc(26,m,2,2,"ion-select-option",14),h.Lb(),h.Lb(),h.Mb(27,"ion-item"),h.Mb(28,"ion-label"),h.ic(29,"Soldi"),h.Lb(),h.Mb(30,"ion-toggle",15),h.Ub("ngModelChange",(function(e){return h.ec(n),h.Wb().money=e})),h.Lb(),h.Lb(),h.Mb(31,"ion-button",16),h.Ub("click",(function(){return h.ec(n),h.Wb().create()})),h.ic(32,"Crea"),h.Lb(),h.Lb()}if(2&e){var i=h.Wb();h.xb(4),h.Zb("ngModel",i.nickname),h.xb(7),h.Zb("ngModel",i.code)("ngModelOptions",h.bc(10,y)),h.xb(9),h.Zb("ngModel",i.selectedSet)("ngModelOptions",h.bc(11,y)),h.xb(1),h.Zb("ngForOf",i.cardSets),h.xb(4),h.Zb("ngModel",i.selectedGame)("ngModelOptions",h.bc(12,y)),h.xb(1),h.Zb("ngForOf",i.games),h.xb(4),h.Zb("ngModel",i.money)}}function M(e,t){1&e&&(h.Mb(0,"div",7),h.Ib(1,"ion-icon",18),h.Lb())}var O,w,L,x=[{path:"",component:(O=function(){function e(t,n,i,o,a,c){r(this,e),this.alertController=t,this.route=n,this.router=i,this.api=o,this.utils=a,this.notificationService=c,this.money=!1,this.isOffline=!1}return c(e,[{key:"ionViewWillEnter",value:function(){this.loadData()}},{key:"join",value:function(){this.code?this.nickname?this.retrieveGroup():this.presentAlert("Per favore, inserisci il nickname."):this.presentAlert("Per favore, inserisci il codice.")}},{key:"create",value:function(){this.nickname?this.getCode():this.presentAlert("Per favore, inserisci il nickname.")}},{key:"goToGame",value:function(e,t){var n=this;this.saveData().then((function(i){var o={queryParams:{group:JSON.stringify(t),player:JSON.stringify(e),game:JSON.stringify(n.games.find((function(e){return e.id===t.game})))},skipLocationChange:!0};n.router.navigate(["/game"],o)}))}},{key:"presentAlert",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:"Attenzione",message:e,buttons:["Ok"]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"saveData",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.utils.setStorage("nickname",this.nickname);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"loadData",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.code=this.route.snapshot.paramMap.get("code"),this.utils.getStorage("nickname").then((function(e){t.nickname=e})),this.getCardSets(),this.getGames();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getCardSets",value:function(){var e=this;this.api.getCardSets().subscribe((function(t){t.success&&t.data?(e.cardSets=t.data,e.selectedSet=e.cardSets[0].id):e.setOfflineStatus()}),(function(t){e.setOfflineStatus()}))}},{key:"getGames",value:function(){var e=this;this.api.getGames().subscribe((function(t){t.success&&t.data?(e.games=t.data,e.selectedGame=e.games[0].id):e.setOfflineStatus()}),(function(t){e.setOfflineStatus()}))}},{key:"getCode",value:function(){var e=this;this.api.createGroup(this.nickname,this.selectedSet,this.selectedGame,this.money).subscribe((function(t){if(t.success&&t.data){var n=t.data,i=t.data.players.find((function(t){return t.name===e.nickname}));e.goToGame(i,n)}else e.presentAlert("Qualcosa non va, riprova pi\xf9 tardi.")}))}},{key:"retrieveGroup",value:function(){var e=this;this.api.joinGroup(this.nickname,this.code).subscribe((function(t){if(t.success&&t.data){var n=t.data,i=t.data.players.find((function(t){return t.name===e.nickname}));e.goToGame(i,n)}else e.presentAlert("Sembra che la partit\xe0 \xe8 gi\xe0 cominciata o che non esiste.")}))}},{key:"setOfflineStatus",value:function(){this.isOffline=!0,this.notificationService.enableNotifications(),this.notificationService.addNotification("Ops, il server non risponde",f.a.Info,5e3)}},{key:"setOnlineStatus",value:function(){this.isOffline=!1,this.notificationService.disableNotifications()}}]),e}(),O.\u0275fac=function(e){return new(e||O)(h.Hb(a.a),h.Hb(u.a),h.Hb(u.g),h.Hb(b.a),h.Hb(p),h.Hb(g.a))},O.\u0275cmp=h.Bb({type:O,selectors:[["app-home"]],decls:19,vars:4,consts:[[3,"translucent"],["color","warning"],["color","danger"],[3,"fullscreen"],["collapse","condense"],["size","large"],["id","container",4,"ngIf"],["id","container"],["position","floating"],["type","text","required","",3,"ngModel","ngModelChange"],["lines","full"],["type","text","required","","placeholder","Inserisci il codice",3,"ngModel","ngModelOptions","ngModelChange"],["color","success",3,"click"],["required","","cancelText","Annulla","okText","Ok",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["slot","end","color","warning",3,"ngModel","ngModelChange"],["color","warning",3,"click"],[3,"value"],["name","cloud-offline-outline",2,"zoom","4.0"]],template:function(e,t){1&e&&(h.Mb(0,"ion-header",0),h.Mb(1,"ion-toolbar"),h.Mb(2,"ion-title"),h.ic(3," un"),h.Mb(4,"ion-text",1),h.ic(5,"ti"),h.Lb(),h.Mb(6,"ion-text",2),h.ic(7,"vitti"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(8,"ion-content",3),h.Mb(9,"ion-header",4),h.Mb(10,"ion-toolbar"),h.Mb(11,"ion-title",5),h.ic(12," un"),h.Mb(13,"ion-text",1),h.ic(14,"ti"),h.Lb(),h.Mb(15,"ion-text",2),h.ic(16,"vitti"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.hc(17,k,33,13,"div",6),h.hc(18,M,2,0,"div",6),h.Lb()),2&e&&(h.Zb("translucent",!0),h.xb(8),h.Zb("fullscreen",!0),h.xb(9),h.Zb("ngIf",!t.isOffline),h.xb(1),h.Zb("ngIf",t.isOffline))},directives:[a.l,a.C,a.A,a.z,a.h,o.j,a.o,a.s,a.n,a.K,s.f,s.d,s.e,a.t,a.e,a.x,a.J,o.i,a.B,a.b,a.y,a.m],styles:["#container[_ngcontent-%COMP%]{text-align:center;padding-top:15vw}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),O)}],S=((L=function e(){r(this,e)}).\u0275mod=h.Fb({type:L}),L.\u0275inj=h.Eb({factory:function(e){return new(e||L)},imports:[[u.i.forChild(x)],u.i]}),L),C=((w=function e(){r(this,e)}).\u0275mod=h.Fb({type:w}),w.\u0275inj=h.Eb({factory:function(e){return new(e||w)},imports:[[o.b,s.a,a.D,S]]}),w)}}])}();
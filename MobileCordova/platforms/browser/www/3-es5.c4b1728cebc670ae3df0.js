!function(){function t(n,e,i){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,n,e){var i=function(t,n){for(;!Object.prototype.hasOwnProperty.call(t,n)&&null!==(t=r(t)););return t}(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(e):o.value}})(n,e,i||n)}function n(t,e){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,e)}function e(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,o=r(t);if(n){var c=r(this).constructor;e=Reflect.construct(o,arguments,c)}else e=o.apply(this,arguments);return i(this,e)}}function i(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function c(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,n,e){return n&&c(t.prototype,n),e&&c(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"H+bZ":function(i,c,s){"use strict";s.d(c,"a",(function(){return g}));var u=s("HDdC"),l=s("7o/Q");function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(n){return n.lift(new d(t,n))}}var b,d=function(){function t(n,e){o(this,t),this.count=n,this.source=e}return a(t,[{key:"call",value:function(t,n){return n.subscribe(new h(t,this.count,this.source))}}]),t}(),h=function(i){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(s,i);var c=e(s);function s(t,n,e){var i;return o(this,s),(i=c.call(this,t)).count=n,i.source=e,i}return a(s,[{key:"error",value:function(n){if(!this.isStopped){var e=this.source,i=this.count;if(0===i)return t(r(s.prototype),"error",this).call(this,n);i>-1&&(this.count=i-1),e.subscribe(this._unsubscribeAndRecycle())}}}]),s}(l.a),p=s("JIr8"),m=s("fXoL"),v=s("tk/3"),g=((b=function(){function t(n){o(this,t),this.http=n,this.endpoint="http://2.238.108.96:3000",this.clientEndpoint="http://ammireto.cloud"}return a(t,[{key:"handleError",value:function(t){return t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error("Backend returned code ".concat(t.status,", body was: ")+t.error),new u.a((function(t){return t.error("Something bad happened; please try again later.")}))}},{key:"getCardSets",value:function(){return this.http.get(this.endpoint+"/getCardSets").pipe(f(2),Object(p.a)(this.handleError))}},{key:"getGames",value:function(){return this.http.get(this.endpoint+"/getGames").pipe(f(2),Object(p.a)(this.handleError))}},{key:"createGroup",value:function(t,n,e,i){return this.http.post(this.endpoint+"/createGroup",{nickname:t,cardSet:n,game:e,money:i}).pipe(f(2),Object(p.a)(this.handleError))}},{key:"joinGroup",value:function(t,n){return this.http.get(this.endpoint+"/joinGroup/"+t+"/"+n).pipe(f(2),Object(p.a)(this.handleError))}},{key:"exitGroup",value:function(t,n){return this.http.get(this.endpoint+"/exitGroup/"+t+"/"+n).pipe(f(2),Object(p.a)(this.handleError))}},{key:"updatePlayers",value:function(t,n){return this.http.post(this.endpoint+"/updatePlayers",{players:t,code:n}).pipe(f(2),Object(p.a)(this.handleError))}},{key:"updateBalance",value:function(t,n,e){return this.http.get(this.endpoint+"/updateBalance/"+t+"/"+n+"/"+e).pipe(f(2),Object(p.a)(this.handleError))}},{key:"setGhost",value:function(t,n,e){return this.http.get(this.endpoint+"/setGhost/"+t+"/"+n+"/"+e).pipe(f(2),Object(p.a)(this.handleError))}}]),t}()).\u0275fac=function(t){return new(t||b)(m.Qb(v.a))},b.\u0275prov=m.Db({token:b,factory:b.\u0275fac,providedIn:"root"}),b)},HM5V:function(t,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"b",(function(){return r}));var i=function(t){return t.Close="close-outline",t.Login="log-in-outline",t.Logout="log-out-outline",t.Info="alert-circle-outline",t}({}),r=function t(){o(this,t),this.disableButton=!1,this.time=2e3}},OC8m:function(t,n,e){"use strict";e.d(n,"a",(function(){return l}));var i=e("mrSG"),r=e("2Vo4"),c=e("HM5V"),s=e("fXoL"),u=e("TEn/"),l=function(){var t=function(){function t(n){o(this,t),this.toastController=n,this.notifications=[],this.notificationListener=new r.a(this.notifications),this.queue=-1,this.initialized=!1}return a(t,[{key:"ionViewDidLeave",value:function(){this.disableNotifications()}},{key:"addNotification",value:function(t,n,e,i){var r=new c.b;r.message=t,r.icon=null!=n?n:r.icon,r.time=null!=e?e:r.time,r.disableButton=null!=i?i:r.disableButton,this.notifications.push(r),this.notificationListener.next(this.notifications)}},{key:"enableNotifications",value:function(){var t=this;this.initialized||(this.initialized=!0,this.notificationListener.subscribe((function(n){return Object(i.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0==n.length){t.next=5;break}return e=this.notifications.pop(),this.notificationListener.next(this.notifications),t.next=5,this.showNotification(e);case 5:case"end":return t.stop()}}),t,this)})))})))}},{key:"disableNotifications",value:function(){this.notificationListener.unsubscribe(),this.initialized=!1}},{key:"showNotification",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.queue++,setTimeout((function(){return Object(i.a)(e,void 0,void 0,regeneratorRuntime.mark((function n(){var e,i,r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=[],t.icon&&e.push({side:"start",icon:t.icon,handler:function(){}}),t.disableButton||e.push({side:"end",icon:c.a.Close,handler:function(){}}),n.next=4,this.toastController.create({message:t.message,duration:t.time,buttons:e});case 4:(i=n.sent).onDidDismiss().then((function(t){r.queue--})),i.present();case 6:case"end":return n.stop()}}),n,this)})))}),t.time*this.queue);case 1:case"end":return n.stop()}}),n,this)})))}}]),t}();return t.\u0275fac=function(n){return new(n||t)(s.Qb(u.L))},t.\u0275prov=s.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},SAsG:function(t,n,e){"use strict";e.d(n,"a",(function(){return S}));var i=e("mrSG"),r=e("nYR2"),c=e("HM5V"),s=e("fXoL"),u=e("TEn/"),l=e("H+bZ"),f=e("zzaN"),b=e("OC8m"),d=e("ofXK");function h(t,n){if(1&t&&(s.Mb(0,"div",16),s.Mb(1,"div",17),s.Ib(2,"img",18),s.Lb(),s.Lb()),2&t){var e=s.Wb().$implicit,i=s.Wb(2);s.xb(2),s.ac("src","./assets/cardSets/",i.cardSet,"/",e.cards[0],".png",s.fc)}}function p(t,n){1&t&&s.Ib(0,"ion-icon",19)}function m(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-chip",20),s.Ub("click",(function(){s.ec(e);var t=s.Wb().$implicit,n=s.Wb(2);return n.currentPlayer.isAdmin&&n.changeBalance(t)})),s.Ib(1,"ion-icon",21),s.Mb(2,"ion-label"),s.ic(3),s.Lb(),s.Lb()}if(2&t){var i=s.Wb().$implicit;s.xb(3),s.jc(i.balance)}}function v(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-item-option",22),s.Ub("click",(function(){s.ec(e);var t=s.Wb().$implicit;return s.Wb(2).remove(t)})),s.ic(1,"Rimuovi"),s.Lb()}}function g(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-item-option",22),s.Ub("click",(function(){s.ec(e);var t=s.Wb().$implicit;return s.Wb(2).setGhost(t,!0)})),s.ic(1,"Spettatore"),s.Lb()}}function y(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-item-option",22),s.Ub("click",(function(){s.ec(e);var t=s.Wb().$implicit;return s.Wb(2).setGhost(t,!1)})),s.ic(1,"Giocatore"),s.Lb()}}var k=function(t){return{canMove:t}},L=function(t){return{myself:t}};function M(t,n){if(1&t&&(s.Mb(0,"ion-item-sliding",9),s.Mb(1,"ion-item",10),s.Mb(2,"ion-label",9),s.ic(3),s.Lb(),s.hc(4,h,3,2,"div",11),s.hc(5,p,1,0,"ion-icon",12),s.hc(6,m,4,1,"ion-chip",13),s.Lb(),s.Mb(7,"ion-item-options",14),s.hc(8,v,2,0,"ion-item-option",15),s.hc(9,g,2,0,"ion-item-option",15),s.hc(10,y,2,0,"ion-item-option",15),s.Lb(),s.Lb()),2&t){var e=n.$implicit,i=s.Wb(2);s.Zb("ngClass",s.cc(10,k,e.canMove)),s.xb(1),s.Zb("disabled",e.ghost),s.xb(1),s.Zb("ngClass",s.cc(12,L,e.name==i.currentPlayer.name)),s.xb(1),s.jc(e.name),s.xb(1),s.Zb("ngIf",e.cards.length>0&&e.visible||i.status&&e.name==i.currentPlayer.name),s.xb(1),s.Zb("ngIf",e.isAdmin),s.xb(1),s.Zb("ngIf",i.moneyMode),s.xb(2),s.Zb("ngIf",i.currentPlayer.isAdmin&&i.currentPlayer.name!=e.name&&!i.status),s.xb(1),s.Zb("ngIf",i.currentPlayer.isAdmin&&!e.ghost&&!i.status),s.xb(1),s.Zb("ngIf",i.currentPlayer.isAdmin&&e.ghost&&!i.status)}}function x(t,n){if(1&t&&(s.Kb(0),s.hc(1,M,11,14,"ion-item-sliding",8),s.Jb()),2&t){var e=s.Wb();s.xb(1),s.Zb("ngForOf",e.players)}}function w(t,n){if(1&t&&(s.Mb(0,"div",16),s.Mb(1,"div",17),s.Ib(2,"img",18),s.Lb(),s.Lb()),2&t){var e=s.Wb().$implicit,i=s.Wb(2);s.xb(2),s.ac("src","./assets/cardSets/",i.cardSet,"/",e.cards[0],".png",s.fc)}}function O(t,n){1&t&&s.Ib(0,"ion-icon",19)}function P(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-chip",20),s.Ub("click",(function(){s.ec(e);var t=s.Wb().$implicit,n=s.Wb(2);return n.currentPlayer.isAdmin&&!n.status&&n.changeBalance(t)})),s.Ib(1,"ion-icon",21),s.Mb(2,"ion-label"),s.ic(3),s.Lb(),s.Lb()}if(2&t){var i=s.Wb().$implicit;s.xb(3),s.jc(i.balance)}}function I(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-item-option",22),s.Ub("click",(function(){s.ec(e);var t=s.Wb().$implicit;return s.Wb(2).remove(t)})),s.ic(1,"Rimuovi"),s.Lb()}}function C(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-item-option",22),s.Ub("click",(function(){s.ec(e);var t=s.Wb().$implicit;return s.Wb(2).setGhost(t,!0)})),s.ic(1,"Spettatore"),s.Lb()}}function j(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-item-option",22),s.Ub("click",(function(){s.ec(e);var t=s.Wb().$implicit;return s.Wb(2).setGhost(t,!1)})),s.ic(1,"Giocatore"),s.Lb()}}function W(t,n){if(1&t&&(s.Mb(0,"ion-item-sliding",9),s.Mb(1,"ion-item",10),s.Mb(2,"ion-label",9),s.ic(3),s.Lb(),s.hc(4,w,3,2,"div",11),s.hc(5,O,1,0,"ion-icon",12),s.hc(6,P,4,1,"ion-chip",13),s.Ib(7,"ion-reorder",0),s.Lb(),s.Mb(8,"ion-item-options",14),s.hc(9,I,2,0,"ion-item-option",15),s.hc(10,C,2,0,"ion-item-option",15),s.hc(11,j,2,0,"ion-item-option",15),s.Lb(),s.Lb()),2&t){var e=n.$implicit,i=s.Wb(2);s.Zb("ngClass",s.cc(10,k,e.canMove)),s.xb(1),s.Zb("disabled",e.ghost),s.xb(1),s.Zb("ngClass",s.cc(12,L,e.name==i.currentPlayer.name)),s.xb(1),s.jc(e.name),s.xb(1),s.Zb("ngIf",e.cards.length>0&&e.visible||i.status&&e.name==i.currentPlayer.name),s.xb(1),s.Zb("ngIf",e.isAdmin),s.xb(1),s.Zb("ngIf",i.moneyMode),s.xb(3),s.Zb("ngIf",i.currentPlayer.isAdmin&&i.currentPlayer.name!=e.name&&!i.status),s.xb(1),s.Zb("ngIf",i.currentPlayer.isAdmin&&!e.ghost&&!i.status),s.xb(1),s.Zb("ngIf",i.currentPlayer.isAdmin&&e.ghost&&!i.status)}}function Z(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-reorder-group",23),s.Ub("ionItemReorder",(function(t){return s.ec(e),s.Wb().reorderPlayers(t)})),s.hc(1,W,12,14,"ion-item-sliding",8),s.Lb()}if(2&t){var i=s.Wb();s.xb(1),s.Zb("ngForOf",i.players)}}function G(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-item",24),s.Ub("click",(function(){return s.ec(e),s.Wb().shareLink()})),s.Mb(1,"ion-label",25),s.ic(2,"Link di invito"),s.Lb(),s.Lb()}}function R(t,n){if(1&t){var e=s.Nb();s.Mb(0,"ion-item",26),s.Ub("click",(function(){return s.ec(e),s.Wb().shareLink()})),s.Mb(1,"ion-label",25),s.ic(2,"Link di invito"),s.Lb(),s.Lb()}}var S=function(){var t=function(){function t(n,e,i,r,c,a){var s=this;o(this,t),this.modalController=n,this.navParams=e,this.api=i,this.clipboard=r,this.notificationService=c,this.alertController=a,this.players=[],this.reordering=!1,this.status=!0;var u=this.navParams.get("state"),l=this.navParams.get("nickname");u.subscribe((function(t){!s.reordering&&s.detectChange(s.players,t.players)&&(s.players=t.players,s.code=t.code,s.currentPlayer=t.players.find((function(t){return t.name===l})),s.status=t.status,s.cardSet=t.cardSet,s.moneyMode=t.money)}))}return a(t,[{key:"ngOnInit",value:function(){}},{key:"dismiss",value:function(){this.modalController.dismiss()}},{key:"reorderPlayers",value:function(t){var n=this;this.reordering=!0;var e=this.players.splice(t.detail.from,1)[0];this.players.splice(t.detail.to,0,e),t.detail.complete(),this.api.updatePlayers(this.players,this.code).pipe(Object(r.a)((function(){return n.reordering=!1}))).subscribe()}},{key:"detectChange",value:function(t,n){return t.forEach((function(t){return t.timestamp=void 0})),n.forEach((function(t){return t.timestamp=void 0})),JSON.stringify(t)!==JSON.stringify(n)}},{key:"shareLink",value:function(){var t=this.api.clientEndpoint+"/join/"+this.code;this.clipboard.copy(t);var n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),new c.b,this.notificationService.addNotification("Link copiato negli appunti")}},{key:"remove",value:function(t){this.api.exitGroup(t.name,this.code).subscribe()}},{key:"changeBalance",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({header:"Cambio bilancio",inputs:[{name:"value",value:t.balance,type:"number",min:0}],buttons:[{text:"Annulla",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"Conferma",handler:function(n){i.api.updateBalance(t.name,i.code,n.value).subscribe((function(t){}))}}]});case 2:return e=n.sent,n.next=5,e.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"setGhost",value:function(t,n){this.api.setGhost(t.name,this.code,n).subscribe((function(t){}))}}]),t}();return t.\u0275fac=function(n){return new(n||t)(s.Hb(u.F),s.Hb(u.G),s.Hb(l.a),s.Hb(f.a),s.Hb(b.a),s.Hb(u.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["app-players"]],decls:12,vars:4,consts:[["slot","end"],["color","dark",3,"click"],["name","close"],[1,"ion-padding-top"],[4,"ngIf"],["disabled","false",3,"ionItemReorder",4,"ngIf"],["class","ion-padding-top",3,"click",4,"ngIf"],["class","ion-padding-top","disabled","true",3,"click",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"player-container",3,"disabled"],["class","cards-container",4,"ngIf"],["name","albums-outline","class","rotate90",4,"ngIf"],["outline","",3,"click",4,"ngIf"],["side","end"],[3,"click",4,"ngIf"],[1,"cards-container"],[1,"card"],[3,"src"],["name","albums-outline",1,"rotate90"],["outline","",3,"click"],["name","server","color","warning"],[3,"click"],["disabled","false",3,"ionItemReorder"],[1,"ion-padding-top",3,"click"],["color","primary"],["disabled","true",1,"ion-padding-top",3,"click"]],template:function(t,n){1&t&&(s.Mb(0,"ion-header"),s.Mb(1,"ion-toolbar"),s.Mb(2,"ion-buttons",0),s.Mb(3,"ion-button",1),s.Ub("click",(function(){return n.dismiss()})),s.Ib(4,"ion-icon",2),s.Lb(),s.Lb(),s.Mb(5,"ion-title"),s.ic(6,"Giocatori online"),s.Lb(),s.Lb(),s.Lb(),s.Mb(7,"ion-content",3),s.hc(8,x,2,1,"ng-container",4),s.hc(9,Z,2,1,"ion-reorder-group",5),s.hc(10,G,3,0,"ion-item",6),s.hc(11,R,3,0,"ion-item",7),s.Lb()),2&t&&(s.xb(8),s.Zb("ngIf",!(n.currentPlayer.isAdmin&&n.players.length>1&&!n.status)),s.xb(1),s.Zb("ngIf",n.currentPlayer.isAdmin&&n.players.length>1&&!n.status),s.xb(1),s.Zb("ngIf",!n.status),s.xb(1),s.Zb("ngIf",n.status))},directives:[u.l,u.C,u.f,u.e,u.m,u.A,u.h,d.j,d.i,u.r,d.h,u.o,u.s,u.q,u.g,u.p,u.v,u.u],styles:[".player-container[_ngcontent-%COMP%]{--min-height:20vw!important}.cards-container[_ngcontent-%COMP%]{width:100%;height:18vw;position:absolute;bottom:0;padding:0;text-align:center}.canMove[_ngcontent-%COMP%]{--ion-background-color:#fff9f7;animation:fade 2s infinite;-moz-animation:fade 2s infinite;-webkit-animation:fade 2s infinite}@keyframes fade{0%{--ion-background-color:#fff4f0}50%{--ion-background-color:#fff}to{--ion-background-color:#fff4f0}}@-webkit-keyframes fade{0%{--ion-background-color:#fff4f0}50%{--ion-background-color:#fff}to{--ion-background-color:#fff4f0}}.card[_ngcontent-%COMP%]{height:25vw}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;border:.05px solid #d3d3d3;border-radius:1vw;filter:contrast(1.2)}.rotate90[_ngcontent-%COMP%]{transform:rotate(270deg)}.myself[_ngcontent-%COMP%]{font-weight:700}"]}),t}()}}])}();